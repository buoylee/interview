## 与mq差异

### 性能与数据完整性取舍

redis为了速度, 必然牺牲写盘(如果 aof 是 always, 可以保证不丢), 

**中间件要保证数据不丢失。 Redis 在以下 2 个场景下，都会导致数据丢失：

1. AOF 持久化配置为每秒写盘，Redis 宕机时会存在丢失最后1秒数据的可能
2. 主从复制的集群，主从切换时，从库还未同步完成主库发来的数据，就被提成主库，也存在丢失数据的可能。

### 消息积压

Kafka、RabbitMQ 这类mq，数据存储在磁盘上，磁盘的成本要比内存小得多，当消息积压时，只是多占用一些磁盘空间，磁盘相比于内存在面对积压时能轻松应对。

Redis提供了可以指定队列最大长度的功能，就是为了避免这种情况发生.

## 使用场景

- 场景足够简单
- 对于数据丢失不敏感
- 消息积压概率比较小

## 参考

[Redis 高级特性 Redis Stream使用](https://www.cnblogs.com/goldsunshine/p/17410148.html) 内容有涉及与mq对比



